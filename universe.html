<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>23 | كوكبة الأفكار المطورة</title>
    <style>
        body { margin: 0; background: #020202; color: #fff; font-family: 'Amiri', serif; overflow: hidden; }
        .info-box { position: fixed; bottom: 40px; right: 40px; max-width: 320px; background: rgba(10,10,10,0.8); padding: 25px; border-left: 3px solid #A67C52; border-radius: 5px; backdrop-filter: blur(15px); pointer-events: none; opacity: 0; transition: 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 1000; }
        .active-info { opacity: 1; transform: translateX(-10px); }
        .back-btn { position: fixed; top: 25px; left: 25px; color: #A67C52; text-decoration: none; border: 1px solid rgba(166,124,82,0.4); padding: 8px 20px; border-radius: 30px; font-size: 0.8rem; z-index: 1001; transition: 0.3s; }
        .back-btn:hover { background: #A67C52; color: #fff; }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">← العودة للجوهر</a>
    <div class="info-box" id="info">
        <h2 id="title" style="color: #A67C52; margin: 0; font-size: 1.8rem;"></h2>
        <p id="desc" style="font-size: 1rem; opacity: 0.8; line-height: 1.8; margin-top: 15px;"></p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script>
        let nodes = [];
        const numNodes = 8; // زدت عدد الأفكار

        function setup() {
            createCanvas(windowWidth, windowHeight);
            // إضافة مفاهيم أعمق وأكثر تعقيداً
            nodes.push(new Node("الإيمان", "تمرد الواعي على عبثية المشهد.", 0.5, 0.5));
            nodes.push(new Node("الخذلان", "المقصلة التي تنهي طفولة الروح.", 0.6, 0.3));
            nodes.push(new Node("صنعاء", "ذاكرة الطين والدموع المستعصية.", 0.4, 0.7));
            nodes.push(new Node("العدم", "المساحة التي يبدأ منها كل شيء.", 0.2, 0.4));
            nodes.push(new Node("الشك", "بوصلة العبور نحو يقينٍ لا يشيخ.", 0.7, 0.6));
            nodes.push(new Node("الغربة", "أن تصرخ بلغة قلبك في زحام الصم.", 0.8, 0.2));
            nodes.push(new Node("الانتظار", "انتحار بطيء بجرعاتٍ من الأمل.", 0.3, 0.2));
            nodes.push(new Node("الحقيقة", "مرآة مهشمة يظن الجميع امتلاكها.", 0.5, 0.8));
        }

        function draw() {
            background(2, 2, 2, 40); // تأثير التلاشي للحركة

            // رسم خيوط العنكبوت الفكرية
            for(let i=0; i<nodes.length; i++) {
                for(let j=i+1; j<nodes.length; j++) {
                    let d = dist(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
                    if (d < 300) {
                        stroke(166, 124, 82, map(d, 0, 300, 100, 0));
                        strokeWeight(map(d, 0, 300, 2, 0.1));
                        line(nodes[i].x, nodes[i].y, nodes[j].x, nodes[j].y);
                    }
                }
                
                // جذب النقاط نحو الماوس (جاذبية الوعي)
                let dMouse = dist(mouseX, mouseY, nodes[i].x, nodes[i].y);
                if (dMouse < 200) {
                    stroke(212, 175, 55, 50);
                    line(mouseX, mouseY, nodes[i].x, nodes[i].y);
                }
            }

            let hoveredAny = false;
            for(let n of nodes) {
                n.update();
                n.display();
                if(n.isHovered()) {
                    showInfo(n.title, n.desc);
                    hoveredAny = true;
                }
            }
            if(!hoveredAny) hideInfo();
        }

        class Node {
            constructor(title, desc, xPct, yPct) {
                this.title = title; this.desc = desc;
                this.x = width * xPct; this.y = height * yPct;
                this.baseX = this.x; this.baseY = this.y;
                this.velX = random(-0.5, 0.5); this.velY = random(-0.5, 0.5);
                this.size = 12;
            }
            update() {
                this.x += this.velX; this.y += this.velY;
                // ارتداد من الحواف
                if(this.x < 50 || this.x > width-50) this.velX *= -1;
                if(this.y < 50 || this.y > height-50) this.velY *= -1;
                
                // تفاعل مع الماوس
                let d = dist(mouseX, mouseY, this.x, this.y);
                if (d < 150) {
                    this.x = lerp(this.x, mouseX, 0.02);
                    this.y = lerp(this.y, mouseY, 0.02);
                    this.size = 18;
                } else {
                    this.size = lerp(this.size, 12, 0.1);
                }
            }
            display() {
                noStroke();
                fill(166, 124, 82);
                ellipse(this.x, this.y, this.size);
                fill(255, 150);
                textSize(14);
                textAlign(CENTER);
                text(this.title, this.x, this.y + 30);
            }
            isHovered() { return dist(mouseX, mouseY, this.x, this.y) < 30; }
        }

        function showInfo(t, d) {
            const box = document.getElementById('info');
            document.getElementById('title').innerText = t;
            document.getElementById('desc').innerText = d;
            box.classList.add('active-info');
        }
        function hideInfo() { document.getElementById('info').classList.remove('active-info'); }
        function windowResized() { resizeCanvas(windowWidth, windowHeight); }
    </script>
</body>
</html>
