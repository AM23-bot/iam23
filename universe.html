<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>23 | كوكبة الدقة</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital@0;1&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'Amiri', serif; height: 100vh; overflow: hidden; }
        
        canvas { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 1; }

        .universe-container { position: relative; width: 100%; height: 100%; z-index: 2; }

        .node {
            position: absolute;
            cursor: pointer;
            transition: 0.5s;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .node-text {
            font-size: 1.2rem;
            color: #A67C52;
            opacity: 0.1; /* مخفية تقريباً */
            transition: 0.8s;
        }

        /* أيقونة المعنى المخفية */
        .meaning-icon {
            width: 20px;
            height: 20px;
            border: 1px solid #A67C52;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            margin-bottom: 5px;
            opacity: 0;
            transform: scale(0);
            transition: 0.4s;
            color: #A67C52;
        }

        .node:hover .node-text { opacity: 1; text-shadow: 0 0 10px rgba(166,124,82,0.5); }
        .node.active .meaning-icon { opacity: 1; transform: scale(1); }

        /* صندوق المعنى المنبثق */
        #meaning-card {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid #A67C52;
            padding: 30px;
            border-radius: 5px;
            max-width: 300px;
            text-align: center;
            display: none;
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .back-link { position: fixed; top: 20px; left: 20px; color: #333; text-decoration: none; font-size: 0.7rem; z-index: 10; }
    </style>
</head>
<body>

    <a href="index.html" class="back-link">العودة للجوهر</a>
    <canvas id="linesCanvas"></canvas>

    <div class="universe-container" id="nodes-container">
        <div class="node" style="top:25%; left:30%;" onclick="showMeaning('الإيمان', 'تمرد الواعي على القبح، ومحاولة العثور على سماء في زنزانة.')">
            <div class="meaning-icon">i</div>
            <div class="node-text">الإيمان</div>
        </div>
        <div class="node" style="top:55%; left:50%;" onclick="showMeaning('العدم', 'المساحة التي يبدأ منها الخلق، حيث لا شيء سوى الاحتمالات.')">
            <div class="meaning-icon">i</div>
            <div class="node-text">العدم</div>
        </div>
        <div class="node" style="top:40%; left:75%;" onclick="showMeaning('الخذلان', 'سقوط القناع عن وجه العالم، وبداية الاعتماد على النفس.')">
            <div class="meaning-icon">i</div>
            <div class="node-text">الخذلان</div>
        </div>
        <div class="node" style="top:70%; left:25%;" onclick="showMeaning('صنعاء', 'مدينة الطين التي تسكن أرواحنا مهما ابتعدنا.')">
            <div class="meaning-icon">i</div>
            <div class="node-text">صنعاء</div>
        </div>
    </div>

    <div id="meaning-card" onclick="this.style.display='none'">
        <h3 id="m-title" style="color:#A67C52; margin-top:0;"></h3>
        <p id="m-desc" style="font-size:0.9rem; line-height:1.6; color:#ccc;"></p>
        <div style="font-size:0.7rem; color:#444; margin-top:20px;">(انقر للإغلاق)</div>
    </div>

    <script>
        const canvas = document.getElementById('linesCanvas');
        const ctx = canvas.getContext('2d');
        const nodes = document.querySelectorAll('.node');

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resize);
        resize();

        function drawLines() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.strokeStyle = 'rgba(166, 124, 82, 0.1)'; // خطوط دقيقة جداً
            ctx.lineWidth = 0.5;

            // ربط كل عقدة بالأخرى بخطوط دقيقة
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const r1 = nodes[i].getBoundingClientRect();
                    const r2 = nodes[j].getBoundingClientRect();
                    ctx.moveTo(r1.left + r1.width/2, r1.top + r1.height/2);
                    ctx.lineTo(r2.left + r2.width/2, r2.top + r2.height/2);
                }
            }
            ctx.stroke();
        }

        // تحريك الخطوط قليلاً مع الماوس لتعطي إحساساً بالحياة
        document.addEventListener('mousemove', (e) => {
            nodes.forEach(node => {
                const rect = node.getBoundingClientRect();
                const nodeX = rect.left + rect.width / 2;
                const nodeY = rect.top + rect.height / 2;
                const dist = Math.sqrt((e.clientX - nodeX)**2 + (e.clientY - nodeY)**2);

                if (dist < 150) {
                    node.classList.add('active');
                    node.querySelector('.node-text').style.opacity = (1 - dist/150);
                } else {
                    node.classList.remove('active');
                    node.querySelector('.node-text').style.opacity = 0.05;
                }
            });
        });

        function showMeaning(title, desc) {
            document.getElementById('m-title').innerText = title;
            document.getElementById('m-desc').innerText = desc;
            document.getElementById('meaning-card').style.display = 'block';
        }

        setInterval(drawLines, 100); // تحديث الرسم
    </script>
</body>
</html>
